(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1d70650"],{2704:function(t,e,i){},"3fca":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"manage-account-container"},[t.isLoading?i("div",{class:{"pc-loading":t.isPc,"mobile-loading":!t.isPc}},[i("a-spin",[i("a-icon",{style:{"font-size":"80px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1):t._e(),t.isPc&&!t.isLoading?i("div",{staticClass:"manage-account-box",style:{filter:t.showSwitchService|t.showResetService|t.showEmailDialog|t.showQrDialog?"blur(5px)":"unset"}},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("ManageAccount.Account-Management")))]),i("div",{staticClass:"card-row-item"},[i("div",{staticClass:"card-item"},[i("div",{staticClass:"card-icon au-address"}),i("div",{staticClass:"card-content"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("ManageAccount.Account-Address")))]),i("span",{staticClass:"tips"},[t._v(t._s(t.$t("ManageAccount.Dont-Leak")))]),i("div",{staticClass:"detail"},[i("span",{staticClass:"link"},[t._v(t._s(t.auAddress))]),i("a-tooltip",{attrs:{placement:"top",trigger:"click",mouseLeaveDelay:1,destroyTooltipOnHide:!0,visible:!t.hideCopyTips}},[i("template",{slot:"title"},[i("span",[t._v(t._s(t.$t("ManageAccount.Copied")))])]),i("span",{staticClass:"copy-tips",on:{click:function(e){return t.copyAddr()},mouseleave:function(e){t.hideCopyTips=!0}}},[t._v(t._s(t.$t("ManageAccount.Copy-Address")))])],2),i("span",{staticClass:"download-btn",on:{click:function(e){return t.downloadAuAccountInfo()}}},[t._v(t._s(t.$t("ManageAccount.Download-Save")))])],1),i("div",{staticClass:"operations"},[i("span",{staticClass:"operation reset-account",on:{click:t.resetAccount}},[t._v(t._s(t.$t("ManageAccount.Reset-Account")))]),i("span",{staticClass:"operation import-account",on:{click:t.displayQR}},[t._v(t._s(t.$t("ManageAccount.Load-Client")))])])])]),i("div",{staticClass:"card-item"},[i("div",{staticClass:"card-icon bind-email"}),i("div",{staticClass:"card-content"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("ManageAccount.Bound-Email")))]),i("span",{staticClass:"tips"},[t._v(t._s(t.$t("ManageAccount.Find-Address")))]),i("div",{staticClass:"detail",staticStyle:{display:"flex","flex-direction":"row"}},[t.email.length>0?i("span",{staticClass:"center-email"},[t._v(t._s(t.email))]):t._e(),i("span",{staticClass:"email-unbind",class:{"email-bind":t.email&&0!==t.emailStatus}},[t._v(t._s(t.email?0===t.emailStatus?t.$t("ManageAccount.Unverified"):t.$t("ManageAccount.Bounded"):t.$t("ManageAccount.Unbounded")))])]),i("div",{staticClass:"operations"},[i("span",{staticClass:"operation row-right",on:{click:t.bindOrUnBindEmail}},[t._v(t._s(t.email?0===t.emailStatus?t.$t("ManageAccount.Verify-Address"):t.$t("ManageAccount.Unbounded-Address"):t.$t("ManageAccount.Bound-Address")))])])])])]),"{}"!==JSON.stringify(t.selectedService)?i("div",{staticClass:"card-row-item"},[i("div",{staticClass:"card-item"},[i("div",{staticClass:"card-icon switch-service"}),i("div",{staticClass:"card-content"},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("ManageAccount.Change-Service")))]),i("span",{staticClass:"tips"},[t._v(t._s(t.$t("ManageAccount.Fast-Change")))]),i("div",{staticClass:"detail",staticStyle:{display:"flex","flex-direction":"row"}},[i("span",{staticStyle:{color:"#242C45"}},[t._v(t._s("Pending"!==t.selectedService.status?t.selectedService.planName.en:t.selectedService.name)+"（"+t._s("Pending"!==t.selectedService.status?t.selectedService.relid:t.selectedService.id)+"）")])]),i("div",{staticClass:"operations"},[i("span",{staticClass:"operation row-right",on:{click:t.resetService}},[t._v(t._s(t.$t("ManageAccount.Change-Service2")))])])])])]):t._e()]):t._e(),t.isPc||t.showEmailDialog||t.showResetService||t.showSwitchService||t.isLoading?t._e():i("div",{staticClass:"manage-account-box-mobile"},[i("span",{staticClass:"box-title"},[t._v(t._s(t.$t("ManageAccount.Manage-Account")))]),i("div",{staticClass:"row-box"},[i("i",{staticClass:"i-account"}),i("span",{staticClass:"row-first"},[t._v(t._s(t.$t("ManageAccount.Au-Account-Address")))]),i("span",{staticClass:"row-sec"},[t._v(t._s(t.$t("ManageAccount.Dont-Leak2")))]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("span",{staticClass:"row-third au-address"},[t._v(t._s(t.auAddress))]),i("span",{staticClass:"download-span favorite-span",staticStyle:{color:"#3963EF"},on:{click:t.mobileDownload}},[t._v(t._s("下載賬戶信息"))]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("div",{staticClass:"operations"},[i("span",{staticClass:"operation reset-account",on:{click:t.resetAccount}},[t._v(t._s(t.$t("ManageAccount.Reset-Account2")))]),i("span",{staticClass:"operation import-account",on:{click:t.displayQR}},[t._v("自研客戶端導入")])])],1),i("div",{staticClass:"row-box"},[i("i",{staticClass:"i-email"}),i("span",{staticClass:"row-first"},[t._v(t._s(t.$t("ManageAccount.Bound-Address2")))]),i("span",{staticClass:"row-sec"},[t._v(t._s(t.$t("ManageAccount.Find-Address2")))]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t.email.length>0?i("span",{staticClass:"row-third",staticStyle:{"margin-right":"0.233rem"}},[t._v(t._s(t.email))]):t._e(),i("span",{staticClass:"email-unbind",class:{"email-bind":t.email&&0!==t.emailStatus}},[t._v(t._s(t.email?0===t.emailStatus?t.$t("ManageAccount.Unverified2"):t.$t("ManageAccount.Bounded2"):t.$t("ManageAccount.Unbounded2")))])]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("span",{staticClass:"row-four",on:{click:t.bindOrUnBindEmail}},[t._v(t._s(t.email?(t.emailStatus,t.$t("ManageAccount.Verify-Address2")):t.$t("ManageAccount.Bound-Address3")))])],1),"{}"!==JSON.stringify(t.selectedService)?i("div",{staticClass:"row-box"},[i("i",{staticClass:"i-switch-service"}),i("span",{staticClass:"row-first"},[t._v(t._s(t.$t("ManageAccount.Change-Service3")))]),i("span",{staticClass:"row-sec"},[t._v(t._s(t.$t("ManageAccount.Fast-Change2")))]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("span",{staticClass:"row-third"},[t._v(t._s("Pending"!==t.selectedService.status?t.selectedService.planName.en:t.selectedService.name)+"（"+t._s("Pending"!==t.selectedService.status?t.selectedService.relid:t.selectedService.id)+"）")]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.427rem 0"}}),i("span",{staticClass:"row-four",on:{click:t.resetService}},[t._v(t._s(t.$t("ManageAccount.Change-Service4")))])],1):t._e()]),i("EmailDialog",{directives:[{name:"show",rawName:"v-show",value:t.showEmailDialog,expression:"showEmailDialog"}],class:{dialog:t.isPc,"dialog-out":!t.showEmailDialog},on:{checkEmailStatus:t.startEmailPolling,closeDialog:t.closeDialog}}),i("ResetServiceDialog",{directives:[{name:"show",rawName:"v-show",value:t.showResetService,expression:"showResetService"}],class:{dialog:t.isPc,"dialog-out":!t.showResetService},attrs:{resetAccount:!0},on:{bindEmail:t.bindOrUnBindEmail,closeDialog:t.closeDialog}}),i("SwitchServiceDialog",{directives:[{name:"show",rawName:"v-show",value:t.showSwitchService,expression:"showSwitchService"}],class:{dialog:t.isPc,"dialog-out":!t.showSwitchService},on:{closeDialog:t.closeDialog}}),i("QRDialog",{directives:[{name:"show",rawName:"v-show",value:t.showQrDialog,expression:"showQrDialog"}],class:{dialog:t.isPc,"dialog-out":!t.showQrDialog},attrs:{clientInfo:t.clientInfo},on:{closeDialog:t.closeDialog}})],1)},s=[],o=(i("99af"),i("8a79"),i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-container"},[i("div",{staticClass:"dialog-bg"}),t.isStartBindEmail?t._e():i("div",{staticClass:"dialog-box",class:{"email-dialog-box":t.isPc,"email-dialog-box-mobile":!t.isPc},on:{click:function(e){t.errorMessage=""}}},[i("div",{staticClass:"first-row"},[i("span",[t._v(t._s(t.isBindEmail?t.$t("EmailDialog.Bound-Email"):t.$t("EmailDialog.Verify-Email")))]),i("i",{on:{click:function(e){return t.closeDialog()}}})]),i("span",{staticClass:"tips-one"},[t._v(t._s(t.$t("EmailDialog.Get-Latest-Info")))]),i("a-input",{attrs:{placeholder:t.$t("EmailDialog.Enter-Email")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),i("div",{staticClass:"btn-row"},[i("a-button",{staticClass:"btn-confirm",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return e.stopPropagation(),t.startBindEmail()}}},[t._v(t._s(t.$t("EmailDialog.Confirm")))]),i("a-button",{on:{click:function(e){return e.stopPropagation(),t.closeDialog()}}},[t._v(t._s(t.$t("EmailDialog.Cancel")))])],1),i("div",{staticClass:"error-message"},[i("span",{staticStyle:{position:"absolute",color:"red"}},[t._v(t._s(t.errorMessage))])])],1),t.isStartBindEmail?i("div",{class:{"email-dialog-box":t.isPc,"email-dialog-box-mobile":!t.isPc},staticStyle:{"justify-content":"center"}},[i("a",{on:{click:function(e){return t.closeDialog()}}}),i("span",{staticClass:"title-span"},[t._v(t._s(t.$t("EmailDialog.Verify-Email-Send")))]),i("span",[t._v(t._s(t.$t("EmailDialog.Check-Verify-Email")))]),t._m(0),i("span",[t._v(t._s(t.$t("EmailDialog.Check-Junk-Box"))),i("span",{staticStyle:{color:"#3963EF",cursor:"pointer"},on:{click:function(e){return t.resendEmail()}}},[t._v(t._s(t.isStartResend?"("+t.secondNum+")":t.$t("Resend")))]),t._v("。")])]):t._e()])}),c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[i("i",{staticClass:"i-verify-email"})])}],n=i("1c18"),l={name:"AccessPointDialog",data:function(){return{show:!0,isStartBindEmail:!1,emailStatus:localStorage.getItem(n["h"]),email:localStorage.getItem(n["g"])?localStorage.getItem(n["g"]).endsWith("@auvpn.net")&&localStorage.getItem(n["g"]).length>40?"":localStorage.getItem(n["g"]):"",isBindEmail:!localStorage.getItem(n["g"])||localStorage.getItem(n["g"]).endsWith("@auvpn.net")&&localStorage.getItem(n["g"]).length>40,errorMessage:"",secondNum:60,isStartResend:!1,countTime:0,isPc:this.$isPc(),isLoading:!1}},methods:{test:function(){alert("test")},resendEmail:function(){var t=this;this.isStartResend||(this.isStartResend=!0,this.countTime=setInterval((function(){t.secondNum--,0===t.secondNum&&(t.secondNum=60,window.clearInterval(t.countTime),t.isStartResend=!1)}),1e3),this.startBindEmail())},startBindEmail:function(){var t={uuid:localStorage.getItem(n["n"]),hmac:localStorage.getItem(n["i"]),email:this.email},e=/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/;this.isLoading=!0;var i=this;this.email&&e.test(this.email)?this.$request.auBindEmail(t,(function(t){i.isLoading=!1,t&&(200===t.status||201===t.status)&&t.data?(localStorage.setItem(n["g"],i.email),i.isStartBindEmail=!0,"succeed"===t.data.result?i.$emit("checkEmailStatus"):i.errorMessage=i.$t("EmailDialog.Send-Fail")):t&&t.message&&"Please use a new email and try again."===t.message?i.errorMessage=i.$t("EmailDialog.Used-Email"):i.errorMessage=i.$t("EmailDialog.Send-Fail")})):(this.errorMessage=this.$t("Login.Enter-Valid-Email"),this.isLoading=!1)},closeDialog:function(){this.isLoading=!1,this.errorMessage="",window.clearInterval(this.countTime),this.$emit("closeDialog",!1)}}},r=l,d=(i("b087"),i("2877")),g=Object(d["a"])(r,o,c,!1,null,null,null),u=g.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-container"},[i("div",{staticClass:"dialog-bg"}),t.isPc?i("div",{staticClass:"switch-service-dialog-box dialog-box"},[i("div",{staticClass:"first-row"},[i("span",[t._v(t._s(t.$t("SwitchServiceDialog.Change-Service")))]),i("i",{on:{click:function(e){return t.closeDialog()}}})]),t.loading?i("div",{staticClass:"loading"},[i("a-spin",[i("a-icon",{style:{"font-size":"80px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1):t._e(),t._l(t.dataList,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"item-box",class:{"item-box-checked":t.clickItem===a},on:{click:function(e){t.clickItem=a}}},[i("span",{staticClass:"item-header"},[t._v(t._s("Pending"!==e.status?e.planName.en:e.name))]),t._v(" "),i("span",{staticClass:"item-sub-header"},[t._v("("+t._s("Pending"!==e.status?e.relid:e.id)+")")]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"20px 0px"}}),i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"first-span"},[t._v(t._s(t.$t("Annually"===e.billingcycle?"MyService.AnnualFee":"Monthly"===e.billingcycle?"MyService.MonthlyFee":"MyService.HalfAYearFee")))]),i("span",{staticClass:"first-span",staticStyle:{"margin-left":"195px",width:"fit-content"}},[t._v(t._s("Pending"!==e.status?t.formatDate(e.expiredTime):e.nextduedate))])]),i("div",{staticStyle:{display:"flex","margin-top":"8px"}},[i("span",{staticClass:"first-span sec-span"},[t._v(t._s("付款週期"))]),i("span",{staticClass:"first-span sec-span",staticStyle:{"margin-left":"195px"}},[t._v(t._s(t.$t("SwitchServiceDialog.Expire-Time")))])])],1)])})),i("div",{staticClass:"buy-service item-box",on:{click:t.toBuyNewService}},[i("span",[t._v("+ 购买新服务")])]),t.dataList.length>0?i("div",[i("a-button",{attrs:{type:"primary",disabled:0===t.dataList.length},on:{click:t.confirmSwitch}},[t._v(t._s(t.$t("SwitchServiceDialog.Confirm-Change")))])],1):t._e(),i("div",{staticClass:"error-message"},[i("span",{staticStyle:{position:"absolute"}},[t._v(t._s(t.errorMessage))])])],2):t._e(),t.isPc?t._e():i("div",{staticClass:"switch-service-dialog-box-mobile"},[i("div",{staticClass:"first-row"},[i("span",[t._v(t._s(t.$t("SwitchServiceDialog.Change-Service2")))]),i("i",{on:{click:function(e){return t.closeDialog()}}})]),t.loading?i("div",{staticClass:"loading"},[i("a-spin",[i("a-icon",{style:{"font-size":"80px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1):t._e(),t._l(t.dataList,(function(e,a){return i("div",{key:a},[i("div",{staticClass:"item-box",class:{"item-box-checked":t.clickItem===a},on:{click:function(e){t.clickItem=a}}},[i("span",{staticStyle:{"font-weight":"500","font-size":"0.453rem"}},[t._v(t._s("Pending"!==e.status?e.planName.en:e.name)+" ("+t._s("Pending"!==e.status?e.relid:e.id)+")")]),i("a-divider",{staticStyle:{"background-color":"#E5E9ED",margin:"0.373rem 0px"}}),i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"item-title-span"},[t._v(t._s("付款週期"))]),i("span",{staticClass:"item-title-span"},[t._v(t._s(t.$t("SwitchServiceDialog.Expire-Time")))])]),i("div",{staticStyle:{display:"flex","margin-top":"0.107rem"}},[i("span",{staticClass:"item-title-span item-content-span"},[t._v(t._s(t.$t("Annually"===e.billingcycle?"MyService.AnnualFee":"Monthly"===e.billingcycle?"MyService.MonthlyFee":"MyService.HalfAYearFee")))]),i("span",{staticClass:"item-title-span item-content-span"},[t._v(t._s("Pending"!==e.status?t.formatDate(e.expiredTime):e.nextduedate))])])],1)])})),i("div",{staticClass:"buy-service item-box",on:{click:t.toBuyNewService}},[i("span",[t._v("+ 购买新服务")])]),t.dataList.length>0?i("div",{staticStyle:{margin:"0.533rem"}},[i("a-button",{attrs:{type:"primary",disabled:0===t.dataList.length},on:{click:t.confirmSwitch}},[t._v(t._s(t.$t("SwitchServiceDialog.Confirm-Change2")))])],1):t._e(),i("div",{staticClass:"error-message"},[i("span",{staticStyle:{position:"absolute"}},[t._v(t._s(t.errorMessage))])])],2)])},v=[],h=(i("159b"),{name:"SwitchServiceDialog",components:{},data:function(){return{loading:!0,clickItem:-1,dataList:[],errorMessage:"",isPc:this.$isPc()}},created:function(){var t=this;this.$request.auGetAllServices("","",(function(e){if(t.loading=!1,e&&(200===e.status||201===e.status)&&e.data&&(localStorage.setItem(n["g"],e.data.email),localStorage.setItem(n["h"],e.data.status),e.data.jjService&&e.data.jjService.length>0&&e.data.jjService.forEach((function(e){t.dataList.push(e)})),e.data.unpaidService&&e.data.unpaidService.length>0&&e.data.unpaidService.forEach((function(e){t.dataList.push(e)})),localStorage.getItem(n["m"]))){var i=JSON.parse(localStorage.getItem(n["m"]));t.dataList.forEach((function(e,a){e.id===i.id&&(t.clickItem=a)}))}}))},methods:{toBuyNewService:function(){window.open("".concat(window.location.origin,"/order/place"),this.$inApp?"_self":"_blank")},formatDate:function(t){var e=new Date(t),i=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var s=e.getDate();return s=s<10?"0"+s:s,i+"-"+a+"-"+s},confirmSwitch:function(){-1!==this.clickItem&&(localStorage.setItem(n["m"],JSON.stringify(this.dataList[this.clickItem])),this.$eventBus.$emit("update_header",!0)),this.$emit("closeDialog",!0)},closeDialog:function(){this.$emit("closeDialog",!0)}}}),p=h,S=(i("5a55"),Object(d["a"])(p,m,v,!1,null,null,null)),f=S.exports,w=i("e6c5"),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-container"},[i("div",{staticClass:"dialog-bg"}),!t.isStartBindEmail&&t.isPc?i("div",{staticClass:"dialog-box qr-dialog-box",on:{click:function(e){t.errorMessage=""}}},[i("i",{on:{click:function(e){return t.closeDialog()}}}),i("div",{ref:"qrcode",staticClass:"i-qr-code",attrs:{id:"qrcode"}}),i("span",{staticClass:"tips"},[t._v(t._s(t.$t("QRDialog.QR-Code-Load"))+"}")])]):t._e(),t.isPc?t._e():i("div",{staticClass:"qr-dialog-box-mobile"},[i("div",{staticClass:"first-row"},[i("span",[t._v("自研安卓客户端导入")]),i("i",{on:{click:function(e){return t.closeDialog()}}})]),i("div",{ref:"qrcodeMobile",staticClass:"i-qr-code",attrs:{id:"qrcode-mobile"}}),i("span",{staticClass:"tips"},[t._v("auVPN App 掃碼導入")]),i("span",{staticClass:"import-app",on:{click:t.importApp}},[t._v("一鍵導入")])])])},C=[],y=i("d044"),b=i.n(y),E={name:"QRDialog",data:function(){return{show:!0,isStartBindEmail:!1,isStartResend:!1,info:"",isPc:this.$isPc()}},props:{clientInfo:{}},watch:{clientInfo:{immediate:!0,handler:function(t){void 0!==t&&(this.info=t,this.showAccountQR())}}},mounted:function(){},methods:{importApp:function(){window.location.href="auvpn://config?".concat(this.info)},showAccountQR:function(){var t=this;this.showQR=!0,this.$refs.qrcode&&(this.$refs.qrcode.innerHTML=""),this.$refs.qrcodeMobile&&(this.$refs.qrcodeMobile.innerHTML=""),this.$nextTick((function(){t.qrcode()}))},qrcode:function(){new b.a(this.isPc?"qrcode":"qrcode-mobile",{correctLevel:b.a.CorrectLevel.M,width:150,height:150,text:this.info})},closeDialog:function(){this.$emit("closeDialog",!1)}}},$=E,D=(i("ceb3"),Object(d["a"])($,_,C,!1,null,null,null)),A=D.exports,I=i("56cd"),k={name:"UserServicePanel",components:{EmailDialog:u,SwitchServiceDialog:f,ResetServiceDialog:w["a"],QRDialog:A},data:function(){return{isLoading:!0,selectedService:localStorage.getItem(n["m"])?JSON.parse(localStorage.getItem(n["m"])):{},showEmailDialog:!1,showResetService:!1,showSwitchService:!1,showQrDialog:!1,lang:this.$i18n.locale,auAddress:"".concat(window.location.origin,"/user/service/0?uuid=").concat(localStorage.getItem(n["n"]),"&hmac=").concat(localStorage.getItem(n["i"])),clientInfo:'{"uuid": '.concat(localStorage.getItem(n["n"]),', "hmac": ').concat(localStorage.getItem(n["i"]),', "email":""}'),email:localStorage.getItem(n["g"])?localStorage.getItem(n["g"]).endsWith("@auvpn.net")&&localStorage.getItem(n["g"]).length>40?"":localStorage.getItem(n["g"]):"",emailStatus:parseInt(localStorage.getItem(n["h"])),intervalId:"",isPc:this.$isPc(),showQR:!1,hideCopyTips:!0}},created:function(){"{}"===JSON.stringify(this.selectedService)?this.getService():this.isLoading=!1},mounted:function(){this.checkEmailStatus()},destroyed:function(){window.clearInterval(this.intervalId)},methods:{copyAddr:function(){var t=document.createElement("textarea");t.value=this.auAddress,t.readOnly=!0,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.className="textarea",t.style.display="none";var e=this;setTimeout((function(){e.hideCopyTips=!0}),1500),this.hideCopyTips=!1},mobileDownload:function(){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent("下面地址打開即可登入 auVPN 賬戶，請務必妥善保存。\n\n".concat(this.auAddress))),t.setAttribute("download","auVPN 賬戶地址"),t.style.display="none",t.click()},downloadAuAccountInfo:function(){if(this.isPc){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent("下面地址打開即可登入 auVPN 賬戶，請務必妥善保存。\n\n".concat(this.auAddress))),t.setAttribute("download","auVPN 賬戶地址"),t.style.display="none",t.click()}else this.copyAddr()},getService:function(){var t=this;this.$request.auGetAllServices("","",(function(e){if(e&&(200===e.status||201===e.status)&&e.data){if(e.data.jjService&&e.data.jjService.length>0){var i=e.data.jjService.filter((function(t){return"Active"===t.status}));localStorage.setItem(n["m"],JSON.stringify(i.length>0?i.pop():e.data.jjService[0]))}else e.data.unpaidService&&e.data.unpaidService.length>0&&localStorage.setItem(n["m"],JSON.stringify(e.data.unpaidService[0]));localStorage.getItem(n["m"])&&(t.selectedService=JSON.parse(localStorage.getItem(n["m"])))}t.isLoading=!1}))},displayQR:function(){this.isPc||window.scrollTo({top:0,left:0,behavior:"smooth"}),this.showQrDialog=!0,this.$emit("dialogShow",!0)},resetAccount:function(){this.isPc||window.scrollTo({top:0,left:0,behavior:"smooth"}),this.showResetService=!0,this.$emit("dialogShow",!0)},resetService:function(){this.isPc||window.scrollTo({top:0,left:0,behavior:"smooth"}),this.showSwitchService=!0,this.$emit("dialogShow",!0)},openNotificationWithIcon:function(t,e,i){I["a"][t]({message:e,description:i})},startEmailPolling:function(){var t=this;0===t.intervalId.length&&(t.startPollingTime=(new Date).getTime(),t.intervalId=setInterval((function(){(new Date).getTime()-t.startPollingTime>12e4||1===t.emailStatus?(window.clearInterval(t.intervalId),t.closeDialog(!0),t.openNotificationWithIcon("success","消息提示","郵箱綁定成功")):t.checkEmailStatus()}),3e3))},checkEmailStatus:function(){if(localStorage.getItem(n["n"])&&localStorage.getItem(n["i"])){var t=this;this.$request.auGetAllServices("","",(function(e){e&&(200===e.status||201===e.status)&&e.data&&(localStorage.setItem(n["g"],e.data.email),localStorage.setItem(n["h"],e.data.status),t.email=localStorage.getItem(n["g"])?localStorage.getItem(n["g"]).endsWith("@auvpn.net")&&localStorage.getItem(n["g"]).length>40?"":localStorage.getItem(n["g"]):"",t.emailStatus=parseInt(localStorage.getItem(n["h"])))}))}},bindOrUnBindEmail:function(){if(this.email)if(0===this.emailStatus)this.isPc||window.scrollTo({top:0,left:0,behavior:"smooth"}),this.showResetService=!1,this.showEmailDialog=!0,this.$emit("dialogShow",!0);else{var t={uuid:localStorage.getItem(n["n"]),hmac:localStorage.getItem(n["i"]),email:this.email},e=this;this.$request.auUnBindEmail(t,(function(t){t&&(200===t.status||201===t.status)&&t.data&&"succeed"===t.data.result&&(e.checkEmailStatus(),e.openNotificationWithIcon("success","消息提示","郵箱解綁成功"))}))}else this.isPc||window.scrollTo({top:0,left:0,behavior:"smooth"}),this.showEmailDialog=!0,this.showResetService=!1,this.$emit("dialogShow",!0)},closeDialog:function(t){t&&(this.auAddress="".concat(window.location.origin,"?uuid=").concat(localStorage.getItem(n["n"]),"&hmac=").concat(localStorage.getItem(n["i"]))),this.showSwitchService&&(this.selectedService=localStorage.getItem(n["m"])?JSON.parse(localStorage.getItem(n["m"])):{}),this.email=localStorage.getItem(n["g"])?localStorage.getItem(n["g"]).endsWith("@auvpn.net")&&localStorage.getItem(n["g"]).length>40?"":localStorage.getItem(n["g"]):"",this.showResetService=!1,this.showEmailDialog=!1,this.showSwitchService=!1,this.showQrDialog=!1,this.$emit("dialogShow",!1)}}},x=k,M=(i("bc96"),Object(d["a"])(x,a,s,!1,null,null,null));e["default"]=M.exports},"5a55":function(t,e,i){"use strict";i("c71c")},a9b4:function(t,e,i){},b051:function(t,e,i){},b087:function(t,e,i){"use strict";i("b051")},bc96:function(t,e,i){"use strict";i("a9b4")},c71c:function(t,e,i){},ceb3:function(t,e,i){"use strict";i("2704")}}]);
//# sourceMappingURL=chunk-a1d70650.698ee28e.js.map